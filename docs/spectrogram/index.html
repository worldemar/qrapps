<style>canvas{left:0;top:0;position:absolute}</style><canvas><script>var e,y,T,w,x,M,A,q,S,p=16e3,B=e=>Math.sqrt(e),D=()=>{var e=A.sampleRate/2,t=x/2;S.getByteFrequencyData(q),y.beginPath(),y.strokeStyle="rgba(128,0,255,255)";for(var a=p;0<a;a-=100){var n=Math.round(B(a/p)*w);a%1e3==0?(y.moveTo(n,t-8),y.lineTo(n,8+t)):a%500==0?(y.moveTo(n,t-4),y.lineTo(n,4+t)):a%100==0&&(y.moveTo(n,t-2),y.lineTo(n,2+t))}for(y.stroke(),y.font="16px monospace",y.textAlign="center",y.textBaseline="top",y.fillStyle="white",a=p;0<a;a-=1e3)n=Math.round(B(a/p)*w),y.fillText(a/1e3,n,0);y.textAlign="left",y.fillText("Frequency - kHz",0,0);for(var r=new Array(w).fill(0),i=q.length*p/e,o=e=>Math.round(B(e/i)*w),l=0;l<i;l++){var d=o(l),m=o(l+1);r.fill(Math.max(r[d],q[l]),d,m)}for(var c,g,f,s,u,v,h,l=0;l<w;l+=1)f=r[l]/255,[s,g,f]=(c=f*f/6,g=1,f=.5*Math.sqrt(f),h=v=u=void 0,s=function(e,t,a){return a<0&&(a+=1),1<a&&--a,a<1/6?e+6*(t-e)*a:a<.5?t:a<2/3?e+(t-e)*(2/3-a)*6:e},0==g?u=v=h=f:(u=s(g=2*f-(f=f<.5?f*(1+g):f+g-f*g),f,c+1/3),v=s(g,f,c),h=s(g,f,c-1/3)),[255*u,255*v,255*h]),T.data[4*l+0]=s,T.data[4*l+1]=g,T.data[4*l+2]=f,T.data[4*l+3]=255;y.putImageData(T,0,M),x<=++M&&(M=16),requestAnimationFrame(D)};setTimeout(()=>{document.getElementsByTagName("body")[0],e=document.getElementsByTagName("canvas")[0],w=e.width=window.innerWidth,x=e.height=window.innerHeight,M=x/2,y=e.getContext("2d"),T=y.createImageData(4*w,1),y.fillStyle="black",y.fillRect(0,0,w,x),navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{A=new AudioContext,(S=A.createAnalyser()).fftSize=8192,q=new Uint8Array(S.frequencyBinCount),A.createMediaStreamSource(e).connect(S),D()},e=>{alert(e)})},0)</script>