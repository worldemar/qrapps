data:text/html,<style>canvas{border:4px solid %23000}div{padding:4px}body{background-color:%232f4f4f;color:%23d3d3d3;font-family:sans-serif}span{font-family:monospace;background-color:%23000;color:%23fff;font-size:large;padding-left:4px;padding-right:4px}input{font-size:large;border:1px solid gray;background-color:%232f4f4f;color:%23fff;border-radius:4px;padding-left:4px;padding-right:4px}</style><div>Chain (halflinks): <input type="number" min="10" max="300" value="100" step="2" id="chain"> | Cainring (teeth): <input type="number" min="10" max="100" value="50" id="chainring"></div><div>minimum: <span id="min"></span> | average: <span id="avg"></span></div><div>Chain wear graph (per-halflink, 0-100%25):<br><canvas></div><script>var r,c,o,h,l=Array(100),i=8,d=4,t=e=>parseFloat(document.getElementById(e).value),e=()=>{(l=Array(t("chain"))).fill(0),r.width=t("chain")*i,r.height=100*d,(o=c.createLinearGradient(0,0,0,r.height)).addColorStop(0,"red"),o.addColorStop(.5,"lime"),o.addColorStop(1,"blue"),a()},a=()=>{for(calc_current_tooth=0;calc_current_tooth<1e3*t("chain");calc_current_tooth++){var e=t("chainring"),e=Math.abs(Math.sin(2*Math.PI*(calc_current_tooth%25e)/e));l[calc_current_tooth%25t("chain")]+=e}},g=()=>{var e=l.reduce((e,t)=>Math.max(e,t),-1/0),t=l.reduce((e,t)=>Math.min(e,t),1/0),a=l.reduce((e,t)=>e+t)/l.length;for(document.getElementById("min").innerHTML=Math.round(t/e*100)+"%25",document.getElementById("avg").innerHTML=Math.round(a/e*100)+"%25",h=0;h<l.length;h++){var n=l[h];c.fillStyle="rgba(0,0,0,1)",c.strokeStyle="rgba(0,0,0,1)",c.fillRect(h*i,0,i,r.height*d),c.fillStyle=o,c.strokeStyle="rgba(0,0,0,1)",c.fillRect(h*i,r.height,i-1,-r.height*n/e)}requestAnimationFrame(g)};setTimeout(()=>{document.getElementById("chain").onchange=e,document.getElementById("chainring").onchange=e,r=document.getElementsByTagName("canvas")[0],c=r.getContext("2d"),e(),g()},1)</script>